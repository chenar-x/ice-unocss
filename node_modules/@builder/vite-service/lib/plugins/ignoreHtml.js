"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ignoreHtmlPlugin = void 0;
var path = require("path");
var glob = require("fast-glob");
var fs = require("fs");
var ignoreHtmlPlugin = function (rootDir) {
    var outDir = '';
    return {
        name: 'vite-plugin-ignore-html',
        enforce: 'post',
        config: function (cfg, _a) {
            var _b, _c;
            var command = _a.command;
            if (command === 'build') {
                outDir = (_c = (_b = cfg.build) === null || _b === void 0 ? void 0 : _b.outDir) !== null && _c !== void 0 ? _c : 'dist';
            }
        },
        closeBundle: function () {
            var distPath = path.resolve(rootDir, outDir);
            var htmlFiles = glob.sync(path.resolve(distPath, '*.html'));
            htmlFiles.forEach(function (file) {
                fs.rmSync(file);
            });
        }
    };
};
exports.ignoreHtmlPlugin = ignoreHtmlPlugin;
//# sourceMappingURL=ignoreHtml.js.map