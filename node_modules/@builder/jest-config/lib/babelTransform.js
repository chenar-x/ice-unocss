"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", { value: true });
// jest、babel-jest 推荐在项目依赖中添加，控制两者版本一致（一般情况下 jest 中已依赖 babel-jest）
var babelJest = require("babel-jest");
var babel_config_1 = require("@builder/babel-config");
var formatWinPath_1 = require("./formatWinPath");
var babelConfig = (0, babel_config_1.default)();
// options for @babel/preset-env when in test command
var jestBabelConfig = __assign(__assign({}, babelConfig), { presets: babelConfig.presets.map(function (preset) {
        if (Array.isArray(preset) && (0, formatWinPath_1.default)(preset[0]).indexOf('@babel/preset-env') > -1) {
            return [preset[0], {
                    targets: {
                        node: 'current',
                    },
                }];
        }
        return preset;
    }) });
// compatible with babel-jest v27
// @ts-ignore
var babelTransform = babelJest.default || babelJest;
// cjs export while babelTransform will been directly required
module.exports = babelTransform.createTransformer(jestBabelConfig);
//# sourceMappingURL=babelTransform.js.map