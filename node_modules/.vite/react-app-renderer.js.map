{
  "version": 3,
  "sources": ["../react-app-renderer/lib/renderer.js", "../react-app-renderer/lib/index.js", "dep:react-app-renderer"],
  "sourcesContent": ["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as queryString from 'query-string';\nimport { loadableReady } from '@loadable/component';\nvar __initialData__;\nexport function setInitialData(initialData) {\n    __initialData__ = initialData;\n}\nexport function getInitialData() {\n    return __initialData__;\n}\nexport function getRenderApp(runtime, options) {\n    var _a, _b;\n    var ErrorBoundary = options.ErrorBoundary, _c = options.appConfig, appConfig = _c === void 0 ? { app: {} } : _c;\n    var AppProvider = (_a = runtime === null || runtime === void 0 ? void 0 : runtime.composeAppProvider) === null || _a === void 0 ? void 0 : _a.call(runtime);\n    var AppComponent = (_b = runtime === null || runtime === void 0 ? void 0 : runtime.getAppComponent) === null || _b === void 0 ? void 0 : _b.call(runtime);\n    var rootApp = React.createElement(AppComponent, null);\n    if (AppProvider) {\n        rootApp = (React.createElement(AppProvider, null, rootApp));\n    }\n    var _d = appConfig.app, ErrorBoundaryFallback = _d.ErrorBoundaryFallback, onErrorBoundaryHandler = _d.onErrorBoundaryHandler, errorBoundary = _d.errorBoundary, _e = _d.strict, strict = _e === void 0 ? false : _e;\n    function App() {\n        if (errorBoundary) {\n            rootApp = (React.createElement(ErrorBoundary, { Fallback: ErrorBoundaryFallback, onError: onErrorBoundaryHandler }, rootApp));\n        }\n        if (strict) {\n            rootApp = (React.createElement(React.StrictMode, null, rootApp));\n        }\n        return rootApp;\n    }\n    return App;\n}\nexport function reactAppRenderer(options) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var appConfig, _b, buildConfig, appLifecycle, createBaseApp, emitLifeCycles, initAppLifeCycles, context, _c, href, origin_1, pathname, search, path, query, ssrError, initialContext, _d, _e, runtime, modifiedAppConfig;\n        return __generator(this, function (_f) {\n            switch (_f.label) {\n                case 0:\n                    appConfig = options.appConfig, _b = options.buildConfig, buildConfig = _b === void 0 ? {} : _b, appLifecycle = options.appLifecycle;\n                    createBaseApp = appLifecycle.createBaseApp, emitLifeCycles = appLifecycle.emitLifeCycles, initAppLifeCycles = appLifecycle.initAppLifeCycles;\n                    context = {};\n                    if (!window.__ICE_APP_DATA__) return [3 /*break*/, 1];\n                    context.initialData = window.__ICE_APP_DATA__;\n                    context.pageInitialProps = window.__ICE_PAGE_PROPS__;\n                    return [3 /*break*/, 3];\n                case 1:\n                    if (!((_a = appConfig === null || appConfig === void 0 ? void 0 : appConfig.app) === null || _a === void 0 ? void 0 : _a.getInitialData)) return [3 /*break*/, 3];\n                    _c = window.location, href = _c.href, origin_1 = _c.origin, pathname = _c.pathname, search = _c.search;\n                    path = href.replace(origin_1, '');\n                    query = queryString.parse(search);\n                    ssrError = window.__ICE_SSR_ERROR__;\n                    initialContext = {\n                        pathname: pathname,\n                        path: path,\n                        query: query,\n                        ssrError: ssrError\n                    };\n                    _d = context;\n                    return [4 /*yield*/, appConfig.app.getInitialData(initialContext)];\n                case 2:\n                    _d.initialData = _f.sent();\n                    _f.label = 3;\n                case 3:\n                    _e = createBaseApp(appConfig, buildConfig, context), runtime = _e.runtime, modifiedAppConfig = _e.appConfig;\n                    // init app life cycles after app runtime created\n                    initAppLifeCycles();\n                    // set InitialData, can get the return value through getInitialData method\n                    setInitialData(context.initialData);\n                    // emit app launch cycle\n                    emitLifeCycles();\n                    return [2 /*return*/, _render(runtime, __assign(__assign({}, options), { appConfig: modifiedAppConfig }))];\n            }\n        });\n    });\n}\nfunction _render(runtime, options) {\n    var _a;\n    var _b = options.appConfig, appConfig = _b === void 0 ? {} : _b;\n    var _c = appConfig.app, rootId = _c.rootId, mountNode = _c.mountNode;\n    var App = getRenderApp(runtime, options);\n    var appMountNode = _getAppMountNode(mountNode, rootId);\n    if (runtime === null || runtime === void 0 ? void 0 : runtime.modifyDOMRender) {\n        return (_a = runtime === null || runtime === void 0 ? void 0 : runtime.modifyDOMRender) === null || _a === void 0 ? void 0 : _a.call(runtime, { App: App, appMountNode: appMountNode });\n    }\n    // add process.env.SSR for tree-shaking\n    if (window.__ICE_SSR_ENABLED__ && process.env.SSR) {\n        loadableReady(function () {\n            ReactDOM.hydrate(React.createElement(App, null), appMountNode);\n        });\n    }\n    else {\n        ReactDOM.render(React.createElement(App, null), appMountNode);\n    }\n}\nfunction _getAppMountNode(mountNode, rootId) {\n    return mountNode || document.getElementById(rootId) || document.getElementById('ice-container');\n}\n//# sourceMappingURL=renderer.js.map", "import { reactAppRenderer, getInitialData, setInitialData } from './renderer';\nexport { getInitialData, setInitialData };\nexport default reactAppRenderer;\n//# sourceMappingURL=index.js.map", "import d from \"./node_modules/react-app-renderer/lib/index.js\";export default d;\nexport * from \"./node_modules/react-app-renderer/lib/index.js\""],
  "mappings": "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",
  "names": []
}
